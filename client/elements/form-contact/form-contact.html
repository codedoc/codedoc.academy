<link rel="import" href="../../components/core-ajax/core-ajax.html">
<polymer-element name="form-contact">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    
    <core-ajax id="request" method="POST" url="api/ping" handleAs="json" 
        on-core-response="{{ on_response }}" on-core-error="{{ on_error }}">
    </core-ajax>

    <form role="form">
      <div class="form-group">
        <label for="fullname">Nome</label>
        <input type="text" class="form-control" id="fullname" placeholder="nome completo">
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" id="email" placeholder="email">
      </div>
      <div class="form-group">
        <label for="message">Lascia un messaggio</label>
        <textarea class="form-control" id="message" on-keypress="{{ on_keypress }}" placeholder="lascia un messaggio"></textarea>
      </div>
      <button id="send" class="btn btn-success" on-click="{{ on_click }}" class="btn btn-default">invia</button>
    </form>

  </template>
  <script>
    Polymer('form-contact', {

      on_keypress: function (event) {
        if (event.keyCode === 13) {
          this.$.send.click();
        }
      },

      on_click: function (event) {
        var email = this.$.email.value;
        var fullname = this.$.fullname.value;
        var message = this.$.message.value;

        var data = {
          email: email,
          fullname: fullname,
          message: message
        };

        var request = this.$.request;
        var body = JSON.stringify(data);

        request.body = body;
        // request.go();
      },

      on_response: function (event) {

      },

      on_error: function (event) {
        
      }

    });
  </script>
</polymer-element>
