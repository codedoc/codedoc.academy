<link rel="import" href="../../components/core-ajax/core-ajax.html">
<link rel="import" href="../../components/paper-input/paper-input.html">
<link rel="import" href="../../components/paper-button/paper-button.html">
<link rel="import" href="../../components/core-icon/core-icon.html">
<link rel="import" href="../../components/core-icons/core-icons.html">

<polymer-element name="part-form">
  <template>
    <style>
      :host {
        display: block;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        -webkit-touch-callout: none;
      }

      paper-input,
      paper-button {
        /*display: inline;*/
      }

      paper-button.colored {
        /*color: #f1c40f;*/
        color: #27ae60;
      }

      paper-button.custom > core-icon {
        margin-right: 4px;
      }

      paper-button.hover:hover {
        background: #eee;
      }
    </style>

    <core-ajax id="request" method="POST" url="/api/pings" handleAs="json" on-core-response="{{ on_response }}"></core-ajax>
    
    <div class="container">
      <div class="col-md-10 col-md-push-1">
        <paper-input id="email" name="email" type="email" label="indirizzo email" error="Non Ã¨ un indirizzo email valido!"></paper-input>
        <paper-button class="colored custom hover" on-click="{{ on_click }}">
          <core-icon icon="check"></core-icon>
          ok
        </paper-button>
        <paper-button class="custom">
      </div>
    </div>

  </template>
  <script>
    Polymer('part-form', {

      on_click: function () {
        var email = this.$.email;
        var request = this.$.request;
        var data = {
          email: email.value
        };

        if (email.validity.valid) {
          request.params = JSON.stringify(data);
          request.go();
          console.log('done!');
        } else {
          console.error('There was an error');
        }

      }

    });
  </script>
</polymer-element>
